{"name":"Blackhole","tagline":"Integrated ssh loging and security tool","body":"# BlackHole\r\n\r\n### What is BlackHole and what it can do?\r\nIt's a security tool to keep tracking and monitor all the ssh and sql sessions on your servers.\r\nYou will know who is connected to where and see what they are doing in real time.\r\nIdentify and keep track of anonymous connections that share a single user.\r\nUse the session logs to do forensics of problems generated after an implementation or deployment done by a user.\r\nGive users access to your platform without handover of any password.\r\nIt replaces the shell of the user (in the BlackHole server) giving the user only a menu that offers targets based on his profile.\r\n\r\nBlackHole is gonna be the only entry point for all your hosts and databases.\r\n\r\n[DIAGRAMA]\r\n\r\n### Keeping track.\r\nBlackHole gives you a web interface so you can in real time know who is connected to where.\r\nWith the possibility of download the log file of that connection so you can see what the user is doing in it.\r\nAlso it stores in a database all the information about all the connections established with the targets.\r\nIncluding:\r\n    - User\r\n    - Source IP\r\n    - Target destination\r\n    - User used to authenticate\r\n    - Login date\r\n    - Logout date\r\n    \r\n### See it in action\r\n\r\nHere you can see it in action\r\n\r\n[![BlackHole - Review](https://i1.ytimg.com/vi/NSPyeQ6UXgs/hqdefault.jpg)](http://www.youtube.com/watch?v=NSPyeQ6UXgs)\r\n\r\n### Installation\r\n\r\nCreate the group\r\n\r\n```Bash\r\ngroup add backhole\r\n```\r\n\r\nCopy to the destination folder, for this example is /opt\r\n\r\n```Bash\r\nmv BlackHole /opt\r\n```\r\n\r\nSet the permissions\r\n\r\n```\r\nchown -r root:blackhole /opt/BlackHole\r\n```\r\n\r\nCreate the database and set the configuration file\r\n\r\n```Bash\r\nvi /opt/BlackHole/blackhole/settings.py\r\n```\r\n\r\n```\r\nDATABASES = {\r\n    'default': {\r\n        'ENGINE': 'django.db.backends.mysql',\r\n        'NAME': 'DATABASE_NAME',\r\n        'USER': 'USER',\r\n        'PASSWORD': 'PASSWORD'\r\n     }}\r\n```\r\n\r\nDefine the path for the logs and set it to the \"log_path\" variable\r\n\r\nCreate the database\r\n\r\n```/opt/BlackHole/manage.py syncdb```\r\n\r\n\r\nTo run the admin site you can use the django integrated web server, but it's not recommended for production.\r\n\r\n```Bash\r\nopt/BlackHole/manage.py runserver\r\n```\r\n**IMPORTANT:** Don't forget to have a redis instance running (you can set the ip or hostname un the settings.py file variable called \"redis_server\")\r\n\r\n**IMPORTANT:** The user who runs the admin site mast have permissions to access to the logs but also to kill the processes (basically must be root)\r\n\r\nYou can use nginx + gunicorn or apache\r\n\r\nYou are now ready to create users and start using it.\r\n\r\nYou must set **/opt/Blackhole/launcher.py** as the shell of the users.\r\n\r\nIt's recommended to disable SCP and SFTP en the server to avoid any access that its not done using BlackHole.\r\nAlso Disable port forwarding in the sshd configuration\r\n\r\n### Setup\r\nHere you can see how to setup BlackHole\r\n[![BlackHole - Setup](https://i1.ytimg.com/vi/trjYvbQE1vY/hqdefault.jpg)](http://www.youtube.com/watch?v=trjYvbQE1vY)\r\n\r\n### Requirements\r\n\r\nSoftware:\r\n- Linux\r\n- Python (tested on 2.6 and 2.7)\r\n- A database engine, int the examples I use MySQL\r\n- Redis (for store information about the active connections)\r\n    \r\nPython Modules:\r\n- Django (Tested with 1.6)\r\n- django-bootstrap3\r\n- django-selectable\r\n- django-widget-tweaks\r\n- paramiko\r\n- urwid\r\n- redis\r\n- pytz\r\n- (The databse engine module of your choice)\r\n    \r\n ","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}